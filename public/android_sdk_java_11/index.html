<!doctype html><html><head><meta charset=utf-8><title>Use Android SDK Manager with Java 11 &ndash; /dev/null
</title><script src=https://cdn.tailwindcss.com></script><link href="//fonts.googleapis.com/css?family=Work+Sans:600|Quattrocento+Sans:400,400i,700" rel=stylesheet type=text/css><link rel=stylesheet type=text/css href=https://pasdam.github.io/blog//css/global.css><link rel=icon href=favicon.svg></head><body><header id=page-header class=bg-green><a href=/><h1>/dev/null</h1></a></header><div id=main><div class=post-body><h1 class=text-green>Use Android SDK Manager with Java 11</h1><p class=text-gray-400>June 9, 2019 &mdash; 2 Min Read</p><hr><div class=tags><div class=tag><a href=/blog/tags/android-sdk/ class=test>Android SDK</a></div><div class=tag><a href=/blog/tags/bug/ class=test>Bug</a></div><div class=tag><a href=/blog/tags/java/ class=test>Java</a></div><div class=tag><a href=/blog/tags/openjdk/ class=test>OpenJDK</a></div></div><hr><nav id=TableOfContents><ul><li><a href=#exception-with-newer-java-versions>Exception with newer Java versions</a></li><li><a href=#install-old-version-of-java>Install old version of java</a></li><li><a href=#switch-between-versions>Switch between versions</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav><hr><div class=content><p>Since with the release 11 some deprecated packages used by the Android SDK <a href=https://openjdk.java.net/jeps/320>were removed</a>, it&rsquo;s not yet possible to run it with the latest Java versions. As a workaround it&rsquo;s possible to download the required classes separately and add them to the classpath, or install the latest supported version, java 1.8. This latter approach is the recommended one.</p><h2 id=exception-with-newer-java-versions>Exception with newer Java versions</h2><p>When using the sdk with newes version of Java the following exception will happen:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ $ANDROID_HOME/tools/bin/sdkmanager
</span></span><span style=display:flex><span>Exception in thread <span style=color:#e6db74>&#34;main&#34;</span> java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlSchema
</span></span><span style=display:flex><span>  at com.android.repository.api.SchemaModule$SchemaModuleVersion.&lt;init&gt;<span style=color:#f92672>(</span>SchemaModule.java:156<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  at com.android.repository.api.SchemaModule.&lt;init&gt;<span style=color:#f92672>(</span>SchemaModule.java:75<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  at com.android.sdklib.repository.AndroidSdkHandler.&lt;clinit&gt;<span style=color:#f92672>(</span>AndroidSdkHandler.java:81<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main<span style=color:#f92672>(</span>SdkManagerCli.java:73<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main<span style=color:#f92672>(</span>SdkManagerCli.java:48<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Caused by: java.lang.ClassNotFoundException: javax.xml.bind.annotation.XmlSchema
</span></span><span style=display:flex><span>  at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass<span style=color:#f92672>(</span>BuiltinClassLoader.java:583<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass<span style=color:#f92672>(</span>ClassLoaders.java:178<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  at java.base/java.lang.ClassLoader.loadClass<span style=color:#f92672>(</span>ClassLoader.java:521<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  ... <span style=color:#ae81ff>5</span> more
</span></span></code></pre></div><p>As said this is because some packaged required by the SDK were removed in Java 11.</p><h2 id=install-old-version-of-java>Install old version of java</h2><p>Just download the desired version of the <a href=https://www.oracle.com/technetwork/java/javase/downloads/index.html>JDK</a>;</p><p>On macOS is possible to use brew to <a href=https://github.com/AdoptOpenJDK/homebrew-openjdk>install different versions</a>.</p><h2 id=switch-between-versions>Switch between versions</h2><p>To check the installed version of Java on macOS:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ /usr/libexec/java_home -V
</span></span><span style=display:flex><span>Matching Java Virtual Machines <span style=color:#f92672>(</span>2<span style=color:#f92672>)</span>:
</span></span><span style=display:flex><span>  11.0.2, x86_64:	<span style=color:#e6db74>&#34;Java SE 11.0.2&#34;</span>	/Library/Java/JavaVirtualMachines/jdk-11.0.2.jdk/Contents/Home
</span></span><span style=display:flex><span>  1.8.0_181, x86_64:	<span style=color:#e6db74>&#34;Java SE 8&#34;</span>	/Library/Java/JavaVirtualMachines/jdk1.8.0_181.jdk/Contents/Home
</span></span></code></pre></div><p>And to check the current active one:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ echo $JAVA_HOME
</span></span><span style=display:flex><span>/Library/Java/JavaVirtualMachines/jdk-11.0.2.jdk/Contents/Home
</span></span></code></pre></div><p>or:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ java -version
</span></span><span style=display:flex><span>java version <span style=color:#e6db74>&#34;11.0.2&#34;</span> 2019-01-15 LTS
</span></span><span style=display:flex><span>Java<span style=color:#f92672>(</span>TM<span style=color:#f92672>)</span> SE Runtime Environment 18.9 <span style=color:#f92672>(</span>build 11.0.2+9-LTS<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Java HotSpot<span style=color:#f92672>(</span>TM<span style=color:#f92672>)</span> 64-Bit Server VM 18.9 <span style=color:#f92672>(</span>build 11.0.2+9-LTS, mixed mode<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>To easily switch between the two sdk it&rsquo;s possible to <a href=https://github.com/pasdam/devbox-setup/blob/master/dotfiles/aliases/java>define aliases</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>j11<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-11.0.2.jdk/Contents/Home; java -version&#39;</span>
</span></span><span style=display:flex><span>j8<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_181.jdk/Contents/Home; java -version&#39;</span>
</span></span></code></pre></div><p>so that it&rsquo;s possible to activate the required version with:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># activate Java 11:</span>
</span></span><span style=display:flex><span>j11
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># activate Java 1.8</span>
</span></span><span style=display:flex><span>j8
</span></span></code></pre></div><h2 id=conclusion>Conclusion</h2><p>Now it will be possible to run the Android SDK with:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>j8
</span></span><span style=display:flex><span>$ANDROID_HOME/tools/bin/sdkmanager
</span></span></code></pre></div></div></div></div></body></html>